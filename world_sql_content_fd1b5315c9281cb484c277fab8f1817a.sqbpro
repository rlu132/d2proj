<?xml version="1.0" encoding="UTF-8"?><sqlb_project><db path="C:/Users/rlu13/Desktop/D2Project/prediction/world_sql_content_fd1b5315c9281cb484c277fab8f1817a.sqlite3" readonly="0" foreign_keys="1" case_sensitive_like="0" temp_store="0" wal_autocheckpoint="1000" synchronous="2"/><attached/><window><main_tabs open="structure browser pragmas query" current="3"/></window><tab_structure><column_width id="0" width="481"/><column_width id="1" width="0"/><column_width id="2" width="125"/><column_width id="3" width="1030"/><column_width id="4" width="0"/><expanded_item id="0" parent="1"/><expanded_item id="1" parent="1"/><expanded_item id="2" parent="1"/><expanded_item id="3" parent="1"/></tab_structure><tab_browse><current_table name="4,28:mainDestinyAchievementDefinition"/><default_encoding codec=""/><browse_table_settings><table schema="main" name="DestinyAchievementDefinition" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_"><sort/><column_widths><column index="1" value="103"/><column index="2" value="300"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="DestinyActivityGraphDefinition" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_"><sort/><column_widths><column index="1" value="103"/><column index="2" value="300"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="DestinyCollectibleDefinition" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_"><sort/><column_widths><column index="1" value="103"/><column index="2" value="300"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="DestinyDamageTypeDefinition" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_"><sort/><column_widths><column index="1" value="103"/><column index="2" value="300"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="DestinyEnergyTypeDefinition" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_"><sort/><column_widths><column index="1" value="97"/><column index="2" value="300"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="DestinyInventoryBucketDefinition" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_"><sort/><column_widths><column index="1" value="103"/><column index="2" value="300"/></column_widths><filter_values><column index="1" value="-182"/></filter_values><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="DestinyItemCategoryDefinition" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_"><sort/><column_widths><column index="1" value="103"/><column index="2" value="300"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="DestinyReportReasonCategoryDefinition" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_"><sort/><column_widths><column index="1" value="103"/><column index="2" value="300"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="DestinyRewardSourceDefinition" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_"><sort><column index="2" mode="1"/></sort><column_widths><column index="1" value="52"/><column index="2" value="52"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="DestinySandboxPerkDefinition" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_"><sort/><column_widths><column index="1" value="103"/><column index="2" value="300"/></column_widths><filter_values><column index="1" value="-8085"/></filter_values><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="DestinySocketCategoryDefinition" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_"><sort/><column_widths><column index="1" value="103"/><column index="2" value="300"/></column_widths><filter_values><column index="1" value="309722977"/></filter_values><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="DestinySocketTypeDefinition" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_"><sort/><column_widths><column index="1" value="103"/><column index="2" value="300"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="DestinyStatDefinition" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_"><sort/><column_widths><column index="1" value="103"/><column index="2" value="300"/></column_widths><filter_values><column index="1" value="-133"/></filter_values><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="DestinyStatGroupDefinition" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_"><sort/><column_widths><column index="1" value="103"/><column index="2" value="300"/></column_widths><filter_values><column index="1" value="1480404414"/></filter_values><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="DestinyTraitDefinition" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_"><sort/><column_widths><column index="1" value="103"/><column index="2" value="300"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table></browse_table_settings></tab_browse><tab_sql><sql name="SQL 1">SELECT json, JSON_extract(json, '$.displayProperties.name') AS name, 
	JSON_extract(json, '$.inventory.tierTypeName') AS tier, 
	Json_extract(json, '$.damageTypes') AS dmgType, 
	JSON_extract(json, '$.itemTypeDisplayName') AS type,
	CASE
		WHEN JSON_extract(json, '$.itemTypeDisplayName') LIKE '%Fusion%' THEN JSON_extract(json, '$.stats.stats.2961396640.value')
	ELSE JSON_extract(json, '$.stats.stats.4284893193.value')
	END AS subtype,
	JSON_extract(json, '$.inventory.bucketTypeHash') AS slot, 
	JSON_extract(json, '$.iconWatermark') AS season
FROM DestinyInventoryItemDefinition
WHERE JSON_extract(json, '$.inventory.bucketTypeHash') IN (953998645, 2465295065, 1498876634)
AND JSON_extract(json, '$.damageTypeHashes') NOT NULL
AND JSON_extract(json, '$.inventory.tierTypeName') = 'Legendary'
ORDER BY type
</sql><sql name="SQL 3">SELECT json,
	JSON_extract(json, '$.displayProperties.name') AS name,
	JSON_extract(json, '$.itemTypeDisplayName') AS type,
	Json_extract(json, '$.damageTypes') AS dmgType, 

	CASE
		WHEN JSON_extract(json, '$.itemTypeDisplayName') = 'Combat Bow' THEN JSON_extract(json, '$.stats.stats.447667954.value')
		WHEN JSON_extract(json, '$.itemTypeDisplayName') LIKE '%Fusion%' THEN JSON_extract(json, '$.stats.stats.2961396640.value')

	ELSE JSON_extract(json, '$.stats.stats.4284893193.value')
	END AS subtype,
	JSON_extract(json, '$.iconWatermark') AS version
FROM DestinyInventoryItemDefinition
WHERE JSON_extract(json, '$.inventory.tierTypeName') = 'Legendary'
AND JSON_extract(json, '$.inventory.bucketTypeHash') IN (953998645, 2465295065, 1498876634)
ORDER BY type, subtype, name</sql><sql name="SQL 4">SElECT JSON_extract(json, '$.itemTypeDisplayName') AS name, COUNT(JSON_extract(json, '$.itemTypeDisplayName')), JSON_extract(json, '$.iconWatermark') AS version
FROM DestinyInventoryItemDefinition
WHERE JSON_extract(json, '$.inventory.tierTypeName') = 'Legendary'
AND JSON_extract(json, '$.damageTypeHashes') NOT NULL
AND JSON_extract(json, '$.inventory.bucketTypeHash') IN (953998645, 2465295065, 1498876634)
GROUP BY JSON_extract(json, '$.iconWatermark')

</sql><current_tab id="0"/></tab_sql></sqlb_project>
